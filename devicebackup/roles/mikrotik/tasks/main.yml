---
# tasks file for mikrotik


############################
# Références:

# --> cisco.ios.ios_interfaces:
# https://docs.ansible.com/ansible/latest/collections/cisco/ios/ios_interfaces_module.html


############################
# Commentaires:

# Comment utilsier le PlayBook:
# 1- Cloner le projet
# 2- Modifier le ficiher devicebackup/hosts et y ajouter les IP / FQDN et les identifiants des équipements
# 3- Aller en SSH dans le dossier devicebackup
# 4- Lancer la commande suivante :
# ansible-playbook -i hosts-cisco test.yml



- name: fetch configuration from Mikrotik device
  ios_command:
    commands:
      - export
    # provider: "{{ login_provider }}"
  register: config
- name: save configuration to file
  copy:
    content: "{{ config.config }}"
    dest: ../backup/backup.txt



- name: run export command on Mikrotik device
  ios_command:
    commands: export
    # provider: "{{ login_provider }}"
  register: output

- name: save output to file
  copy:
    content: "{{ output.stdout }}"
    dest: /path/to/backup.rsc


# - name: fetch configuration from Mikrotik device
#   ios_config:
#     provider: "{{ login_provider }}"
#   register: config

# - name: save configuration to file
#   copy:
#     content: "{{ config.config }}"
#     dest: /path/to/config.txt